import{u as I,r as n,a as R,j as s,L as h,b as v}from"./index-BX1Ylhwe.js";const _=()=>{const{ingredientName:a}=I(),[d,o]=n.useState([]),[f,r]=n.useState(!0),[l,c]=n.useState(null),{wishlistItems:m,addToWishlist:p,removeFromWishlist:u}=R(),N=e=>e?e.toLowerCase().replace(/[-\s]/g,""):"",x=async()=>{try{const e=N(a);if(!e)throw new Error("Invalid ingredient name.");const i=encodeURIComponent(e);console.log(`Fetching recipes for: ${i}`);const t=await v.get(`https://backend-testofindia.onrender.com/api/recipe?category=${i}`);console.log(t.data),t.data&&t.data.data?o(t.data.data):o([])}catch(e){console.error("Error fetching recipes:",e),c("Failed to load recipes. Please try again later.")}finally{r(!1)}};n.useEffect(()=>{a?(r(!0),x()):(c("Ingredient name is missing."),r(!1))},[a]);const j=e=>{m.some(t=>t.id===e._id)?u(e._id):p({id:e._id,name:e.RecipeName,image:e.Images})},g=e=>m.some(i=>i.id===e);return f?s.jsx("div",{className:"loading",children:"Loading..."}):l?s.jsx("div",{className:"error-message",children:l}):d.length===0?s.jsx("div",{className:"no-recipes-message",children:"No recipes found for this ingredient."}):s.jsxs("div",{className:"ingredient-detail-container",children:[s.jsxs("h1",{className:"ingredient-title",children:["Recipes for ",a]}),s.jsx("div",{className:"ingredient-recipe-list",children:d.map(e=>s.jsxs("div",{className:"ingredient-recipe-card",children:[s.jsxs(h,{to:`/recipe/${e._id}`,className:"ingredient-recipe-link",children:[s.jsx("img",{src:e.Images?e.Images:"/images/default-recipe.jpg",alt:e.RecipeName||"Recipe",className:"ingredient-recipe-image"}),s.jsx("h2",{className:"ingredient-recipe-name",children:e.RecipeName||"Unnamed Recipe"})]}),s.jsx(h,{to:`/recipe/${e._id}`,className:"ingredient-view-recipe-button",children:"View Recipe"}),s.jsx("button",{className:"wishlist-button",onClick:i=>{i.preventDefault(),j(e)},"aria-label":g(e._id)?"Remove from wishlist":"Add to wishlist",children:s.jsx("i",{className:`fas fa-heart ${g(e._id)?"red":""}`})})]},e._id))})]})};export{_ as default};
